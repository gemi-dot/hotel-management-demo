{% extends "hotel/base_dashboard.html" %}
{% load static %}
{% load humanize %}
{% load peso_filters %}

{% block title %}Dashboard - Hotel Management{% endblock %}

{% block content %}
<style>
    /* Reset base template container styling for dashboard */
    .container {
        padding: 0 !important;
        background: none !important;
        border-radius: 0 !important;
        box-shadow: none !important;
        margin: 0 !important;
        max-width: none !important;
    }
    
    /* Override navbar and body for full-screen effect */
    body {
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    /* Background Animation */
    .dashboard-container {
        display: flex;
        min-height: 100vh;
        margin: 0;
        position: relative;
        overflow-x: hidden;
    }
    
    /* Animated Background Elements */
    .dashboard-container::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
            radial-gradient(circle at 20% 80%, rgba(102, 126, 234, 0.15) 0%, transparent 50%),
            radial-gradient(circle at 80% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 40% 40%, rgba(59, 130, 246, 0.08) 0%, transparent 50%);
        z-index: 0;
        animation: backgroundShift 20s ease-in-out infinite;
    }
    
    @keyframes backgroundShift {
        0%, 100% { 
            background: 
                radial-gradient(circle at 20% 80%, rgba(102, 126, 234, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(59, 130, 246, 0.08) 0%, transparent 50%);
        }
        33% { 
            background: 
                radial-gradient(circle at 70% 30%, rgba(102, 126, 234, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 30% 70%, rgba(147, 51, 234, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 60% 60%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);
        }
        66% { 
            background: 
                radial-gradient(circle at 50% 90%, rgba(102, 126, 234, 0.18) 0%, transparent 50%),
                radial-gradient(circle at 90% 10%, rgba(147, 51, 234, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 10% 50%, rgba(59, 130, 246, 0.12) 0%, transparent 50%);
        }
    }
    
    /* Floating Icons Animation */
    .floating-icons {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
        overflow: hidden;
    }
    
    .floating-icon {
        position: absolute;
        color: rgba(102, 126, 234, 0.08);
        font-size: 3rem;
        animation: float 25s infinite linear;
    }
    
    @keyframes float {
        0% {
            transform: translateY(100vh) rotate(0deg) scale(0.8);
            opacity: 0;
        }
        5% {
            opacity: 0.6;
        }
        95% {
            opacity: 0.6;
        }
        100% {
            transform: translateY(-10vh) rotate(360deg) scale(1.2);
            opacity: 0;
        }
    }
    
    .floating-icon:nth-child(1) { left: 5%; animation-delay: 0s; font-size: 2.5rem; }
    .floating-icon:nth-child(2) { left: 15%; animation-delay: 3s; font-size: 2rem; }
    .floating-icon:nth-child(3) { left: 25%; animation-delay: 6s; font-size: 3.5rem; }
    .floating-icon:nth-child(4) { left: 35%; animation-delay: 9s; font-size: 2.8rem; }
    .floating-icon:nth-child(5) { left: 45%; animation-delay: 12s; font-size: 2.2rem; }
    .floating-icon:nth-child(6) { left: 55%; animation-delay: 15s; font-size: 3rem; }
    .floating-icon:nth-child(7) { left: 65%; animation-delay: 18s; font-size: 2.6rem; }
    .floating-icon:nth-child(8) { left: 75%; animation-delay: 21s; font-size: 2.4rem; }
    .floating-icon:nth-child(9) { left: 85%; animation-delay: 24s; font-size: 3.2rem; }
    .floating-icon:nth-child(10) { left: 95%; animation-delay: 2s; font-size: 2.3rem; }
    
    .sidebar {
        width: 250px; /* Reduced from 280px to 250px for better screen fit */
        background: linear-gradient(145deg, rgba(102, 126, 234, 0.95) 0%, rgba(118, 75, 162, 0.95) 100%);
        color: white;
        padding: 0;
        box-shadow: 4px 0 20px rgba(0,0,0,0.15);
        position: relative;
        height: 100vh;
        overflow-y: auto;
        z-index: 100;
        backdrop-filter: blur(20px);
        border-right: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    /* Enhanced Sidebar Header with Glow Effect */
    .sidebar-header {
        padding: 20px; /* Reduced from 25px to 20px */
        background: rgba(0,0,0,0.3);
        border-bottom: 1px solid rgba(255,255,255,0.2);
        position: relative;
        overflow: hidden;
    }
    
    .sidebar-header::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
        transform: rotate(45deg);
        animation: shimmer 4s infinite;
    }
    
    @keyframes shimmer {
        0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }
    
    .sidebar-header h4 {
        margin: 0;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 12px; /* Reduced from 15px to 12px */
        position: relative;
        z-index: 1;
        font-size: 1.05rem; /* Reduced from 1.1rem to 1.05rem */
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .main-content {
        flex: 1;
        padding: 20px; /* Reduced from 25px to 20px */
        background: rgba(248, 250, 252, 0.8);
        min-height: 100vh;
        backdrop-filter: blur(10px);
        position: relative;
        z-index: 10;
    }
    
    .quick-actions {
        list-style: none;
        padding: 0;
        margin: 15px 0; /* Reduced from 20px 0 to 15px 0 */
    }
    
    .quick-actions li {
        margin: 0;
    }
    
    .quick-actions .action-category {
        padding: 12px 20px 8px; /* Reduced from 15px 25px 10px */
        font-size: 0.75rem; /* Reduced from 0.8rem to 0.75rem */
        font-weight: 700;
        text-transform: uppercase;
        opacity: 0.9;
        border-bottom: 1px solid rgba(255,255,255,0.1);
        margin-top: 12px; /* Reduced from 15px to 12px */
        letter-spacing: 1px;
    }
    
    .quick-actions .action-category:first-child {
        margin-top: 0;
    }
    
    .quick-actions a {
        display: flex;
        align-items: center;
        gap: 12px; /* Reduced from 15px to 12px */
        padding: 12px 20px; /* Reduced from 15px 25px */
        color: rgba(255,255,255,0.9);
        text-decoration: none;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border-left: 3px solid transparent;
        position: relative;
        font-size: 0.9rem; /* Added smaller font size */
    }
    
    .quick-actions a::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 0;
        background: rgba(255,255,255,0.1);
        transition: width 0.3s ease;
        z-index: -1;
    }
    
    .quick-actions a:hover::before {
        width: 100%;
    }
    
    .quick-actions a:hover {
        background: rgba(255,255,255,0.1);
        border-left: 3px solid #fbbf24;
        color: #fbbf24;
        transform: translateX(8px);
        box-shadow: 0 4px 15px rgba(251, 191, 36, 0.2);
    }
    
    .quick-actions a i {
        font-size: 1.2rem; /* Reduced from 1.3rem to 1.2rem */
        width: 22px; /* Reduced from 25px to 22px */
        text-align: center;
    }
    
    .action-badge {
        margin-left: auto;
        font-size: 0.6rem; /* Reduced from 0.65rem to 0.6rem */
        padding: 3px 6px; /* Reduced from 4px 8px */
        border-radius: 10px; /* Reduced from 12px to 10px */
        background: rgba(255,255,255,0.2);
        font-weight: 600;
        letter-spacing: 0.5px;
    }
    
    /* Enhanced Metric Cards */
    .metric-card {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 20px;
        padding: 20px; /* Reduced from 30px to 20px */
        box-shadow: 0 10px 40px rgba(0,0,0,0.08);
        border-left: 5px solid #3b82f6;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        position: relative;
        overflow: hidden;
        z-index: 10;
    }
    
    /* Card Hover Effects with Shine */
    .metric-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
        transition: left 0.6s ease;
    }
    
    .metric-card:hover::before {
        left: 100%;
    }
    
    .metric-card:hover {
        transform: translateY(-8px) scale(1.03);
        box-shadow: 0 20px 60px rgba(0,0,0,0.15);
    }
    
    .metric-card.success { border-left-color: #10b981; }
    .metric-card.warning { border-left-color: #f59e0b; }
    .metric-card.danger { border-left-color: #ef4444; }
    .metric-card.info { border-left-color: #06b6d4; }
    .metric-card.dark { border-left-color: #6b7280; }
    
    .metric-value {
        font-size: 1.5rem; /* Reduced from 1.8rem to 1.5rem */
        font-weight: 800;
        margin: 10px 0 5px; /* Reduced from 15px 0 8px to 10px 0 5px */
        animation: countUp 2s ease-out;
    }
    
    @keyframes countUp {
        0% { transform: scale(0.8); opacity: 0; }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); opacity: 1; }
    }
    
    .metric-label {
        color: #6b7280;
        font-size: 0.8rem; /* Reduced from 0.85rem to 0.8rem */
        margin: 0;
        font-weight: 500;
    }
    
    .metric-icon {
        float: right;
        font-size: 1.5rem; /* Reduced from 1.8rem to 1.5rem */
        opacity: 0.15;
        margin-top: -10px; /* Reduced from -15px to -10px */
    }
    
    /* Enhanced Dashboard Header */
    .dashboard-header {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 20px;
        padding: 20px; /* Reduced from 30px to 20px */
        margin-bottom: 30px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.08);
        display: flex;
        justify-content: space-between;
        align-items: center;
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        position: relative;
        overflow: hidden;
        z-index: 10;
    }
    
    .dashboard-header::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, #3b82f6, #8b5cf6, #06b6d4, #3b82f6);
        background-size: 200% 100%;
        animation: gradientFlow 4s ease infinite;
    }
    
    @keyframes gradientFlow {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }
    
    .header-content {
        display: flex;
        align-items: center;
        gap: 20px;
    }
    
    .header-text {
        flex: 1;
    }
    
    .header-content h2 {
        margin: 0;
        color: #1e293b;
        font-weight: 700;
        font-size: 1.2rem; /* Reduced from 1.4rem to 1.2rem */
    }
    
    .header-content small {
        color: #64748b;
        font-weight: 500;
        font-size: 0.8rem; /* Added smaller font size */
    }
    
    /* Hotel Counter Visual */
    .hotel-counter-visual {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        border: 2px solid rgba(255,255,255,0.8);
        overflow: hidden;
    }
    
    .hotel-counter-visual::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><rect x="20" y="120" width="160" height="40" fill="%23374151" rx="4"/><rect x="30" y="80" width="20" height="40" fill="%236b7280"/><rect x="60" y="90" width="20" height="30" fill="%236b7280"/><rect x="90" y="85" width="20" height="35" fill="%236b7280"/><rect x="120" y="90" width="20" height="30" fill="%236b7280"/><rect x="150" y="80" width="20" height="40" fill="%236b7280"/><circle cx="100" cy="50" r="8" fill="%23fbbf24"/><rect x="70" y="100" width="60" height="20" fill="%23f59e0b" rx="2"/><rect x="80" y="105" width="8" height="10" fill="%23ffffff"/><rect x="92" y="105" width="8" height="10" fill="%23ffffff"/><rect x="104" y="105" width="8" height="10" fill="%23ffffff"/><rect x="116" y="105" width="8" height="10" fill="%23ffffff"/><rect x="40" y="160" width="120" height="8" fill="%23d1d5db"/><rect x="50" y="170" width="100" height="4" fill="%23e5e7eb"/></svg>') center/contain no-repeat;
        opacity: 0.8;
    }
    
    .hotel-counter-visual::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
        transform: rotate(45deg);
        animation: shimmerCounter 3s infinite;
    }
    
    @keyframes shimmerCounter {
        0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }
    
    /* Decorative elements around the counter */
    .counter-decoration {
        position: absolute;
        color: rgba(59, 130, 246, 0.3);
        font-size: 0.8rem;
        animation: float 4s ease-in-out infinite;
    }
    
    .counter-decoration:nth-child(1) {
        top: -5px;
        left: -5px;
        animation-delay: 0s;
    }
    
    .counter-decoration:nth-child(2) {
        top: -5px;
        right: -5px;
        animation-delay: 1s;
    }
    
    .counter-decoration:nth-child(3) {
        bottom: -5px;
        left: -5px;
        animation-delay: 2s;
    }
    
    .counter-decoration:nth-child(4) {
        bottom: -5px;
        right: -5px;
        animation-delay: 3s;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px) scale(1); opacity: 0.6; }
        50% { transform: translateY(-10px) scale(1.1); opacity: 1; }
    }

    /* Enhanced DateTime Display */
    .datetime-display {
        background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
        color: white;
        padding: 15px 20px; /* Reduced from 20px 25px to 15px 20px */
        border-radius: 15px;
        font-weight: 600;
        box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        position: relative;
        overflow: hidden;
        text-align: center;
    }
    
    .datetime-display::before {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(45deg, #3b82f6, #8b5cf6, #06b6d4, #3b82f6);
        background-size: 400% 400%;
        z-index: -1;
        border-radius: 15px;
        animation: borderGlow 3s ease infinite;
    }
    
    @keyframes borderGlow {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }
    
    .datetime-display .date {
        font-size: 0.8rem; /* Reduced from 0.9rem to 0.8rem */
        display: block;
        opacity: 0.9;
        margin-bottom: 3px; /* Reduced from 5px to 3px */
    }
    
    .datetime-display .time {
        font-size: 1.1rem; /* Reduced from 1.2rem to 1.1rem */
        font-weight: 700;
        display: block;
    }
    
    /* Recent Bookings Enhanced */
    .recent-bookings-card {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 20px;
        padding: 0;
        box-shadow: 0 10px 40px rgba(0,0,0,0.08);
        overflow: hidden;
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        z-index: 10;
        position: relative;
        margin-top: 20px; /* Reduced spacing */
    }
    
    .recent-bookings-header {
        background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
        color: white;
        padding: 15px 20px; /* Reduced from 20px 25px */
        margin: 0;
        font-weight: 700;
        font-size: 1.05rem; /* Reduced from 1.1rem */
    }

    /* Optimize table layout for better screen fit */
    .recent-bookings-card .table-responsive {
        max-height: 400px; /* Set max height to prevent excessive scrolling */
        overflow-y: auto;
    }

    .recent-bookings-card .table {
        font-size: 0.85rem; /* Reduce font size for better fit */
        margin-bottom: 0;
    }

    .recent-bookings-card .table th {
        background-color: #f8f9fa;
        font-weight: 600;
        font-size: 0.8rem; /* Smaller header font */
        padding: 10px 8px; /* Reduced padding */
        border-top: none;
        position: sticky;
        top: 0;
        z-index: 1;
    }

    .recent-bookings-card .table td {
        padding: 10px 8px; /* Reduced padding */
        vertical-align: middle;
        border-top: 1px solid rgba(0,0,0,0.05);
    }

    /* Compact guest info */
    .recent-bookings-card .avatar {
        width: 30px !important; /* Reduced from 35px */
        height: 30px !important;
        font-size: 0.75rem !important; /* Smaller avatar text */
    }

    .recent-bookings-card .fw-semibold {
        font-size: 0.85rem;
        line-height: 1.2;
    }

    .recent-bookings-card .text-muted {
        font-size: 0.7rem; /* Smaller secondary text */
        line-height: 1.1;
    }

    /* Compact badges */
    .recent-bookings-card .badge {
        font-size: 0.7rem; /* Smaller badges */
        padding: 3px 6px;
    }

    /* Compact button group */
    .recent-bookings-card .btn-group .btn {
        padding: 4px 6px; /* Smaller buttons */
        font-size: 0.75rem;
    }

    /* Make room info more compact */
    .recent-bookings-card .text-primary {
        font-size: 0.9rem;
        font-weight: 600;
    }

    /* Optimize for different screen sizes */
    @media (max-width: 1200px) {
        .recent-bookings-card .table {
            font-size: 0.8rem;
        }
        
        .recent-bookings-card .table th,
        .recent-bookings-card .table td {
            padding: 8px 6px;
        }
    }

    @media (max-width: 992px) {
        .recent-bookings-card .table-responsive {
            max-height: 350px;
        }
        
        /* Hide less critical columns on medium screens */
        .recent-bookings-card .table th:nth-child(7),
        .recent-bookings-card .table td:nth-child(7) {
            display: none;
        }
    }
    
    @media (max-width: 768px) {
        .recent-bookings-card {
            margin: 15px 0;
        }
        
        .recent-bookings-header {
            padding: 12px 15px;
            font-size: 1rem;
        }
        
        .recent-bookings-card .p-4 {
            padding: 15px !important;
        }
        
        .recent-bookings-card .table-responsive {
            max-height: 300px;
        }
        
        /* Stack booking info vertically on mobile */
        .recent-bookings-card .table th:nth-child(3),
        .recent-bookings-card .table th:nth-child(4),
        .recent-bookings-card .table th:nth-child(7),
        .recent-bookings-card .table td:nth-child(3),
        .recent-bookings-card .table td:nth-child(4),
        .recent-bookings-card .table td:nth-child(7) {
            display: none;
        }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            position: fixed;
            z-index: 1000;
        }
        
        .sidebar.show {
            transform: translateX(0);
        }
        
        .main-content {
            margin-left: 0;
            padding: 15px;
        }
        
        .mobile-toggle {
            display: block !important;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .dashboard-header {
            flex-direction: column;
            gap: 20px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 1.5rem;
        }
        
        .metric-icon {
            font-size: 1.5rem;
        }
    }
    
    .mobile-toggle {
        display: none;
    }
    
    /* Scrollbar Styling */
    .sidebar::-webkit-scrollbar {
        width: 6px;
    }
    
    .sidebar::-webkit-scrollbar-track {
        background: rgba(255,255,255,0.1);
    }
    
    .sidebar::-webkit-scrollbar-thumb {
        background: rgba(255,255,255,0.3);
        border-radius: 3px;
    }
    
    .sidebar::-webkit-scrollbar-thumb:hover {
        background: rgba(255,255,255,0.5);
    }
    
    /* Copyright Footer Styling */
    .copyright-footer {
        margin-top: 40px;
        padding: 20px 0;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        text-align: center;
        background: rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(10px);
        border-radius: 10px;
    }
    
    .copyright-content {
        color: #6b7280;
    }
    
    .copyright-content p {
        font-size: 0.75rem; /* Smaller font size */
        margin-bottom: 5px;
        font-weight: 500;
    }
    
    .copyright-content small {
        font-size: 0.65rem; /* Even smaller for subtitle */
        opacity: 0.8;
    }
    
    .copyright-content i {
        font-size: 0.7rem; /* Smaller icon */
        opacity: 0.7;
    }
</style>

<!-- Floating Background Icons -->
<div class="floating-icons">
    <i class="floating-icon bi bi-building"></i>
    <i class="floating-icon bi bi-calendar-check"></i>
    <i class="floating-icon bi bi-people"></i>
    <i class="floating-icon bi bi-house-door"></i>
    <i class="floating-icon bi bi-star"></i>
    <i class="floating-icon bi bi-heart"></i>
    <i class="floating-icon bi bi-gem"></i>
    <i class="floating-icon bi bi-award"></i>
    <i class="floating-icon bi bi-trophy"></i>
    <i class="floating-icon bi bi-shield-check"></i>
</div>

<div class="dashboard-container">
    <!-- Mobile Toggle Button -->
    <button class="mobile-toggle" onclick="toggleSidebar()">
        <i class="bi bi-list"></i>
    </button>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h4>
                <i class="bi bi-building"></i>
                Hotel Dashboard
            </h4>
        </div>
        
        <ul class="quick-actions">
            <!-- Booking Management -->
            <li class="action-category">üìã Booking Management</li>
            <li>
                <a href="{% url 'booking_create' %}">
                    <i class="bi bi-plus-circle"></i>
                    <span>New Booking</span>
                    <span class="action-badge">Create</span>
                </a>
            </li>
            <li>
                <a href="{% url 'booking_list' %}">
                    <i class="bi bi-list-task"></i>
                    <span>Manage Bookings</span>
                    <span class="action-badge">View</span>
                </a>
            </li>
            <li>
                <a href="{% url 'booking_summary' %}">
                    <i class="bi bi-clipboard-data"></i>
                    <span>Booking Summary</span>
                    <span class="action-badge">Report</span>
                </a>
            </li>
            
            <!-- Room Management -->
            <li class="action-category">üè† Room Management</li>
            <li>
                <a href="{% url 'room_list' %}">
                    <i class="bi bi-house-door"></i>
                    <span>Manage Rooms</span>
                    <span class="action-badge">Edit</span>
                </a>
            </li>
            <li>
                <a href="{% url 'vacant_rooms' %}">
                    <i class="bi bi-house-check"></i>
                    <span>Vacant Rooms</span>
                    <span class="action-badge">Info</span>
                </a>
            </li>
            <li>
                <a href="{% url 'room_create' %}">
                    <i class="bi bi-plus-square"></i>
                    <span>Add New Room</span>
                    <span class="action-badge">Create</span>
                </a>
            </li>
            
            <!-- Guest Management -->
            <li class="action-category">üë• Guest Management</li>
            <li>
                <a href="{% url 'guest_list' %}">
                    <i class="bi bi-people"></i>
                    <span>Manage Guests</span>
                    <span class="action-badge">View</span>
                </a>
            </li>
            <li>
                <a href="{% url 'guest_create' %}">
                    <i class="bi bi-person-plus"></i>
                    <span>Add Guest</span>
                    <span class="action-badge">Create</span>
                </a>
            </li>
            
            <!-- Reports & Analytics -->
            <li class="action-category">üìä Reports & Analytics</li>
            <li>
                <a href="{% url 'occupancy_report' %}">
                    <i class="bi bi-bar-chart"></i>
                    <span>Occupancy Report</span>
                    <span class="action-badge">Analytics</span>
                </a>
            </li>
            <li>
                <a href="{% url 'revenue_report' %}">
                    <i class="bi bi-graph-up"></i>
                    <span>Revenue Report</span>
                    <span class="action-badge">Financial</span>
                </a>
            </li>
            <li>
                <a href="{% url 'booking_history' %}">
                    <i class="bi bi-clock-history"></i>
                    <span>Booking History</span>
                    <span class="action-badge">Archive</span>
                </a>
            </li>
            
            <!-- Export Options -->
            <li class="action-category">üì§ Export Data</li>
            <li>
                <a href="{% url 'export_booking_list_csv' %}">
                    <i class="bi bi-filetype-csv"></i>
                    <span>Export to CSV</span>
                    <span class="action-badge">CSV</span>
                </a>
            </li>
            <li>
                <a href="{% url 'export_booking_list_excel' %}">
                    <i class="bi bi-file-earmark-excel"></i>
                    <span>Export to Excel</span>
                    <span class="action-badge">Excel</span>
                </a>
            </li>
        </ul>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <div class="header-content">
                <div class="header-text">
                    <h2>Welcome back, {{ user.first_name|default:'Admin' }}! üëã</h2>
                    <small>Here's what's happening at your hotel today</small>
                </div>
            </div>
            <div class="datetime-display">
                <span class="date" id="currentDate"></span>
                <span class="time" id="currentTime"></span>
            </div>
        </div>
        
        <!-- Metrics Cards -->
        <div class="row mb-4">
            <div class="col-md-3 mb-4">
                <div class="metric-card success">
                    <i class="bi bi-currency-dollar metric-icon"></i>
                    <div class="metric-value">‚Ç±{{ total_revenue|peso|default:"0.00" }}</div>
                    <p class="metric-label">Total Revenue</p>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="metric-card warning">
                    <i class="bi bi-exclamation-triangle metric-icon"></i>
                    <div class="metric-value">‚Ç±{{ outstanding_balance|peso|default:"0.00" }}</div>
                    <p class="metric-label">Outstanding Balance</p>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="metric-card info">
                    <i class="bi bi-calendar-check metric-icon"></i>
                    <div class="metric-value">{{ total_bookings|default:"0" }}</div>
                    <p class="metric-label">Total Bookings</p>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="metric-card dark">
                    <i class="bi bi-house-door metric-icon"></i>
                    <div class="metric-value">{{ occupied_rooms|default:"0" }}/{{ total_rooms|default:"0" }}</div>
                    <p class="metric-label">Occupied Rooms</p>
                </div>
            </div>
        </div>
        
        <!-- Second Row of Metrics -->
        <div class="row mb-4">
            <div class="col-md-3 mb-4">
                <div class="metric-card danger">
                    <i class="bi bi-clock-history metric-icon"></i>
                    <div class="metric-value">{{ pending_checkins|default:"0" }}</div>
                    <p class="metric-label">Pending Check-ins</p>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="metric-card success">
                    <i class="bi bi-door-open metric-icon"></i>
                    <div class="metric-value">{{ pending_checkouts|default:"0" }}</div>
                    <p class="metric-label">Pending Check-outs</p>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="metric-card info">
                    <i class="bi bi-people metric-icon"></i>
                    <div class="metric-value">{{ total_guests|default:"0" }}</div>
                    <p class="metric-label">Total Guests</p>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="metric-card warning">
                    <i class="bi bi-percent metric-icon"></i>
                    <div class="metric-value">{{ occupancy_rate|default:"0" }}%</div>
                    <p class="metric-label">Occupancy Rate</p>
                </div>
            </div>
        </div>
        
        <!-- Recent Bookings -->
        <div class="row">
            <div class="col-12">
                <div class="recent-bookings-card">
                    <h5 class="recent-bookings-header">
                        <i class="bi bi-calendar-event me-2"></i>
                        Recent Bookings
                    </h5>
                    <div class="p-4">
                        {% if recent_bookings %}
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Guest</th>
                                            <th>Room</th>
                                            <th>Check-in</th>
                                            <th>Check-out</th>
                                            <th>Status</th>
                                            <th>Total Amount</th>
                                            <th>Payment Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for booking in recent_bookings %}
                                        <tr>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="avatar me-2 bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 35px; height: 35px; font-size: 0.8rem;">
                                                        {{ booking.guest.name|first }}
                                                    </div>
                                                    <div>
                                                        <div class="fw-semibold">{{ booking.guest.name }}</div>
                                                        <small class="text-muted">{{ booking.guest.email }}</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div>
                                                    <span class="fw-semibold text-primary">{{ booking.room.number }}</span>
                                                    <br>
                                                    <small class="text-muted">{{ booking.room.room_type }} - ‚Ç±{{ booking.room.price|floatformat:2 }}/night</small>
                                                </div>
                                            </td>
                                            <td>
                                                <div>
                                                    <span class="fw-semibold">{{ booking.check_in|date:"M d, Y" }}</span>
                                                    <br>
                                                    <small class="text-muted">{{ booking.check_in|date:"l" }}</small>
                                                </div>
                                            </td>
                                            <td>
                                                <div>
                                                    <span class="fw-semibold">{{ booking.check_out|date:"M d, Y" }}</span>
                                                    <br>
                                                    <small class="text-muted">{{ booking.check_out|date:"l" }}</small>
                                                </div>
                                            </td>
                                            <td>
                                                {% if booking.status == 'confirmed' %}
                                                    <span class="badge bg-success">Confirmed</span>
                                                {% elif booking.status == 'pending' %}
                                                    <span class="badge bg-warning">Pending</span>
                                                {% elif booking.status == 'cancelled' %}
                                                    <span class="badge bg-danger">Cancelled</span>
                                                {% elif booking.status == 'checked_in' %}
                                                    <span class="badge bg-info">Checked In</span>
                                                {% elif booking.status == 'checked_out' %}
                                                    <span class="badge bg-secondary">Checked Out</span>
                                                {% else %}
                                                    <span class="badge bg-light text-dark">{{ booking.status|capfirst }}</span>
                                                {% endif %}
                                            </td>
                                            <td>
                                                <span class="fw-semibold text-success">‚Ç±{{ booking.total_price|floatformat:2 }}</span>
                                            </td>
                                            <td>
                                                {% if booking.payment_status == 'paid' %}
                                                    <span class="badge bg-success">
                                                        <i class="bi bi-check-circle me-1"></i>Paid
                                                    </span>
                                                {% elif booking.payment_status == 'partial' %}
                                                    <span class="badge bg-warning">
                                                        <i class="bi bi-clock me-1"></i>Partial
                                                    </span>
                                                {% else %}
                                                    <span class="badge bg-danger">
                                                        <i class="bi bi-exclamation-circle me-1"></i>Unpaid
                                                    </span>
                                                {% endif %}
                                            </td>
                                            <td>
                                                <div class="btn-group" role="group">
                                                    <a href="{% url 'booking_detail' booking.pk %}" class="btn btn-sm btn-outline-primary" title="View Details">
                                                        <i class="bi bi-eye"></i>
                                                    </a>
                                                    <a href="{% url 'booking_edit' booking.pk %}" class="btn btn-sm btn-outline-secondary" title="Edit Booking">
                                                        <i class="bi bi-pencil"></i>
                                                    </a>
                                                    {% if booking.payment_status != 'paid' %}
                                                    <a href="{% url 'payment_create' booking.pk %}" class="btn btn-sm btn-outline-success" title="Add Payment">
                                                        <i class="bi bi-credit-card"></i>
                                                    </a>
                                                    {% endif %}
                                                </div>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            <div class="text-center mt-3">
                                <a href="{% url 'booking_list' %}" class="btn btn-primary">
                                    <i class="bi bi-list me-2"></i>
                                    View All Bookings
                                </a>
                            </div>
                        {% else %}
                            <div class="text-center py-5">
                                <i class="bi bi-calendar-x display-4 text-muted mb-3"></i>
                                <h5 class="text-muted">No recent bookings</h5>
                                <p class="text-muted">When you have bookings, they'll appear here</p>
                                <a href="{% url 'booking_create' %}" class="btn btn-primary">
                                    <i class="bi bi-plus-circle me-2"></i>
                                    Create First Booking
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Copyright Footer -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="copyright-footer">
                    <div class="copyright-content">
                        <p class="mb-0">
                            <i class="bi bi-c-circle me-2"></i>
                            Copyright 2026 SoftWorks. All rights reserved.
                        </p>
                        <small class="text-muted">Hotel Management System</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Real-time Date and Time Updates
function updateDateTime() {
    const now = new Date();
    const dateOptions = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
    };
    const timeOptions = { 
        hour: '2-digit', 
        minute: '2-digit', 
        second: '2-digit',
        hour12: true
    };
    
    document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', dateOptions);
    document.getElementById('currentTime').textContent = now.toLocaleTimeString('en-US', timeOptions);
}

// Mobile Sidebar Toggle
function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('show');
}

// Initialize and update every second
updateDateTime();
setInterval(updateDateTime, 1000);

// Auto-hide sidebar on mobile when clicking outside
document.addEventListener('click', function(event) {
    const sidebar = document.getElementById('sidebar');
    const toggle = document.querySelector('.mobile-toggle');
    
    if (window.innerWidth <= 768) {
        if (!sidebar.contains(event.target) && !toggle.contains(event.target)) {
            sidebar.classList.remove('show');
        }
    }
});

// Smooth scrolling for sidebar links
document.querySelectorAll('.quick-actions a').forEach(link => {
    link.addEventListener('click', function() {
        if (window.innerWidth <= 768) {
            document.getElementById('sidebar').classList.remove('show');
        }
    });
});

// Add loading states to cards
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.metric-card');
    cards.forEach((card, index) => {
        card.style.animation = `slideInUp 0.6s ease ${index * 0.1}s both`;
    });
});

// Add slide-in animation
const style = document.createElement('style');
style.textContent = `
    @keyframes slideInUp {
        from {
            transform: translateY(30px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }
`;
document.head.appendChild(style);
</script>

{% endblock %}

